+++
date = "2015-01-06T09:30:45+03:30"
draft = false
title = "setup vps"
slug= "setup-vps"
categories = ["Linux", "Yandex", "MailServer", "CloudFlare"]
type= "post"
+++
من با ترمینال غریبه نیستم، حقیقت اینه که خیلی هم باهاش راحتم. اینکه بخوام یه برنامه رو تو ترمینال نصب کنم و کانفیگ کنم اصولا ترجیح منه، ولی این یه جفت استثنا هم داره. این یه جفت استثنا، تنظیم dns (باز tinydns خیلی بهتره، از bind متنفرم رسما!) و یکی هم تنظیم mail server برای دریافت و ارسال ایمیل، ارسال معولا راحته، ولی دریافت رو اصلا حسشو ندارم :)) الان اگه شما حسشو دارید، و اینکار براتون راحته، سیستمتون هم به اندازه کافی قدرتمند هست که مثلا یه roundcube راه بندازید روش، همین جا دیگه ادامه ندید :) و خیلی خوشحالم که تا همین قسمتشو خوندید :))

یه مشکل دیگه هم هست، که مثلا برای همین وبلاگ، من یه دامین دارم، نیازی هم ندارم به هیچ فضای خاصی، و همین گیتهاب و فضای اون برام کافیه، ولی حقیقتش اینه که اصلا من این دامین رو گرفتم برای ایمیل، خیلی ظلمه که اون ایمیل رو نداشته باشم، ولی بالاخره باید یه جوری این دامین رو وصل کنم به یه سیستم که بتونم یه میل روش نصب کنم، و حقیقتا خیلی مسخره بود که یه وی پی اس یا حتی یه هاست اشتراکی! براش بگیرم. 

این شد که به فکر افتادم یه راه جایگزین براشون پیدا کنم، و خوب پیدا شد. 

برای dns من خیلی ساده از [cloudflare](https://www.cloudflare.com/) استفاده کردم. انقدر ساده و راحت که اون اوایل برای یه مدتی باورم نمیشد کار کنه، ولی خوب، چرا نباید کار کنه :) یه اکانت cloudflare بسازید، که فکر کنم راحت و ساده میتونید اینکار رو بکنید. 

گام بعدی اضافه کردن سایتتونه. 

بعد اضافه کردن رکوردهای لازم، معمولا یه A رکورد لازمه برای دامنه اصلی، و یک CNAME برای ساب دامنه ها. کار سختی نیست. من دامنه اصلی rubi.gd رو فرستادم روی یک آی پی خاص ، شمل میتونید مثلا اونو کلا بذاریدش رو github. ساب دامنه fzero هم که خوب خیلی ساده یه رکورد CNAME بود که بعد با گیتهاب مدیریت میشه. 

زیاد تنظیماتش سخت نیست، خود cloudflare هم کمک میکنه برای راه انداختنش، خودش توضیح میده که حالا مثلا یه A رکورد کم داری یا هر چی. 

این قسمت کار ساده تر از اونه که توضیح بخواد، و اگر کسی حوصله داشت انجام بده و اسکرین شات بذاره، همین جا PR بده خیلی هم خوشحال میشم. 

اما نکته رو اعصاب هنوز مونده. ایمیل! ارسال و دریافت ایمیل که هم نه اسپم بشه (یعنی اگه کار ناشایستی نکردیم، چرا باید اسپم بشه آخه!!) و هم اینکه یک میل باکس درست و حسابی هم داشته باشیم. گوگل، mailgun که تا جایی که یادمه یه بار ازش استفاده کردم، این امکانات رو میدن، گوگل که کلا پولیه و mailgun یه سری محدودیت اعصاب خورد کن داره، و اینکه خوب، برادر پوتین :)) به دادم رسید و رفتم سراغ yandex که یه سرور همه کارست که توی روسیه خیلی طرفدار داره. 

اگه البته میخواید از این سیستم برای دریافت و ارسال ایمیل های اکیدا محرمانه! استفاده کنید، توصیه نمیکنم، ولی بعیده که کاری به کار ایمیلای ما داشته باشن، دست کم کمتر از گوگل انگولکشون میکنن. 
خوب چکار باید بکنیم؟ طبیعتا اولش یه اکانت [yandex.com](http://yandex.com) بسازید، ساختش سادست و سرراست.
گام بعدی اضافه کردن دامنه شماست. حقیقت اینه که نمیدونم چرا این قسمت سایت yandex فقط روسی نوشته و توصیه میکنم مثلا از کروم استفاده کنید که بتونید ترجمش کنید. برید به [این آدرس](https://pdd.yandex.ru/domains_add/) : 

یا منتظر بشید ترجمش کنه کروم براتون یا اینکه اگه میفهمید زبونشونو :) گوشه سمت راست بالا لینک ورود رو بزنید و با اکانتی که توی [yandex.com](http://yandex.com) ساختید وارد بشید. 

خیلی از لینکها وقتی تو مود ترجمه شده هستید کار نمیکنن، هر وقت تو این شرایط بودید، لینک رو که پیدا کردید و فهمیدید چیه، ترجمه رو خاموش کنید و ادامه بدید. 

'گام بعدی کاملا مشخصه، اسم سایتتون رو بعد از @ وارد کنید : 
![ثبت دامنه در yandex](/images/setup-vps/yandex1.png)

مثلا من rubi.gd رو وارد کردم که آدرس همین سایته. و دکمه جلوییش رو بزنید. 

صفحه بعدی ترجمه شدش میشه این : 
![ثبت دامنه در yandex](/images/setup-vps/yandex2.png)

دو مرحله هست که میتونید دوتاشو یدفعه انجام بدید. اولیش وریفای کردن دامنه برای [yandex.com](http://yandex.com) ه. ظاهرا خود yandex میتونه خدماتی مشابه  [cloudflare](https://www.cloudflare.com/)  ارایه بده که من چون از قبل تو همین CF راحت بودم دنبالش نرفتم. ولی اگر از yandex برای همین کار استفاده کنید، دیگه این مراحل رو ندارید. 

به هر حال میگه که دو تا رکورد DNS باید اضافه بشه. اولش یه CNAME باید ساخته بشه که مثلا تو عکس بالا باید مقدارش قرار داده بشه yamail-c038a7c8dc21 و یک MX هم باید اضافه بشه برای من این شد : 

![افزودن رکورد در cf](/images/setup-vps/cf-2.png)

همچنین برای اینکه نامه‌های ارسالی‌تون به پوشهٔ اسپم نره، بهتره رکورد spf با مشخصات زیر رو هم اضافه کنین:

 * Subdomain name: @
 * Record type: TXT
 * Data: v=spf1 redirect=_spf.yandex.net


بعد از اینکه تایید بشه میرید صفحه بعدی، این ممکنه در حد چند دقیقه طول بکشه ولی دکمه رو فشار بدید سعی میکنه تست کنه. 

بعدشم که سادست : 
![ایجاد ایمیل](/images/setup-vps/yandex3.png)

![افزودن ایمیل](/images/setup-vps/yandex4.png)

اون لینک Mail Login تله است :)) از اونجا برید کل زندگی روسی میشه. 
خیلی ساده برید [yandex.com](http://yandex.com) و صفحه ایمیل رو بزنید و آدرس کامل ایمیل رو بزنید و کلمه رمز رو. 
دفعه اول خیلی ساده ازتون یه سری مشخصات میپرسه و تموم. اگه از لینک تله برید، که کلا باید این رو روسی پر کنید و بعد تو ایمیل باکستون پیدا کردن تغییر زبان زیاد سخت نیست. 
